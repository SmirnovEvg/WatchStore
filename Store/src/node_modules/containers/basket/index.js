import React from 'react'
import {connect} from 'react-redux'
import R from 'ramda'

import {
    getBasketWatchesWithCount,
    getTotalBasketPrice
} from 'selectors'

const Basket = ({watches, totalPrice}) => {
    const isBasketEmpty = R.isEmpty(watches)
  
    const renderContent = () => {
      return (
        <div>
          {isBasketEmpty && <div>Ваша корзина пуста</div>}
  
          <div className='basket-list'>
            <table className='basket-list-table'>
              <tbody>
              {watches.map((watch, index) => (
                <tr
                  key={index}
                  className='basket-list-table-item'
                >
                  <td className='first-table-column'>
                    <img
                      className='img-thumbnail'
                      src={watch.image}
                      alt={watch.name}
                    />
                  </td>
                  <td>{watch.name}</td>
                  <td>${watch.price}</td>
                  <td>{watch.count}</td>
                  <td>
                      <span
                        className='delete-cart'
                      >X</span>
                  </td>
                </tr>
              ))}
              </tbody>
            </table>
          </div>
          {
            R.not(isBasketEmpty) &&
            <div className='row'>
              <div className='total-prise'>
                Итого к оплате: {totalPrice} руб.
              </div>
            </div>
          }
        </div>
      )
    }
  
    const renderSidebar = () => (
      <div>
       Sidebar
      </div>
    )
  
    return (
      <div className='view-container'>
        <div className='container'>
          <div className='row'>
            <div className='col-md-9'>
              {renderContent()}
            </div>
            <div className='col-md-3 btn-user-checkout'>
              {renderSidebar()}
            </div>
          </div>
        </div>
      </div>
    )
}  

const mapStateToProps = state => {
    return {
      watches: getBasketWatchesWithCount(state),
      totalPrice: getTotalBasketPrice(state)
    }
  }
  
  export default connect(mapStateToProps, null)(Basket)
  
